(function(){function e(a,b){this.x=void 0!==a?a:0;this.y=void 0!==b?b:0}e.prototype.clone=function(){return new e(this.x,this.y)};e.prototype.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};e.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};e.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};function f(a,b){this.width=a;this.height=b}f.prototype.clone=function(){return new f(this.width,this.height)};f.prototype.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};f.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};f.prototype.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function h(a,b,c,m){this.a=a;this.b=b;this.width=c;this.height=m}h.prototype.clone=function(){return new h(this.a,this.b,this.width,this.height)};h.prototype.h=function(){return new f(this.width,this.height)};h.prototype.ceil=function(){this.a=Math.ceil(this.a);this.b=Math.ceil(this.b);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};
h.prototype.floor=function(){this.a=Math.floor(this.a);this.b=Math.floor(this.b);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};h.prototype.round=function(){this.a=Math.round(this.a);this.b=Math.round(this.b);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};function k(){this.a=new f(600,400);this.f=new e(100,100);this.b=new f(50,36);this.c=-10;this.j=new e(60,50);this.v=new f(50,36);this.s=new e(0,0);this.u=new f(229,620);this.g=2.5*this.b.width};var l=new k;function n(){this.b=new e(l.f.x,l.f.y);this.f=new f(l.b.width,l.b.height);this.a=0;this.c=new Image;this.c.src="src/images/bird.png"}n.prototype.m=function(){var a=new Image;a.src=this.c.src;return a};n.prototype.i=function(){return new e(this.b.x,this.b.y)};n.prototype.h=function(){return new f(this.f.width,this.f.height)};function q(a){a.b.y+=a.a};var r=new k;function t(a){this.f=new Image;this.f.src="src/images/pipe.png";var b;b=r.g;b=Math.floor(Math.random()*(r.a.height-b+1))+b;this.b=new e(a,0);this.a=new e(a,b);this.g=new f(50,Math.floor(Math.random()*(b-r.g-0+1))+0);this.c=new f(50,r.a.height-b);this.o=!1}t.prototype.m=function(){var a=new Image;a.src=this.f.src;return a};t.prototype.i=function(){return[new e(this.b.x,this.b.y),new e(this.a.x,this.a.y)]};
t.prototype.h=function(){return[new f(this.g.width,this.g.height),new f(this.c.width,this.c.height)]};t.prototype.l=function(){this.c=this.g=this.a=this.b=this.f=null;this.o=!1};function u(){this.g=!0;this.f=new Image;this.f.src="src/images/background.png";this.a=[];if(!this.g){var a=this.b;a.c=null;a.b=null;a.f=null;for(a=a.a=0;a<this.a.length;++a)this.l(a)}this.b=new n;this.c=new e(0,0);for(a=0;8>a;++a)v(this);this.j=0;this.g=!1}function v(a){a.a.push(new t(400+200*a.a.length))}u.prototype.l=function(a){this.a[a].l();this.a.splice(a,1)};function w(a){this.b={width:a.width,height:a.height};this.a=a.getContext("2d");this.c=document.getElementById("score")};var x=new k;function y(a){this.c=a;z(this)}function z(a){var b=document.createElement("button");b.style.position="absolute";b.style.left=x.a.width/2+"px";b.style.top=x.a.height/2+"px";b.appendChild(document.createTextNode("START!"));b.onclick=function(){b.parentNode.removeChild(b);A(a,a.c)};document.body.appendChild(b)}
function B(a){clearInterval(a.g);clearInterval(a.f);var b=document.createElement("button");b.style.position="absolute";b.style.left=x.a.width/2+"px";b.style.top=x.a.height/2+"px";b.appendChild(document.createTextNode("RESTART"));var c=document.createElement("button");c.style.position="absolute";c.style.left=x.a.width/2+10+"px";c.style.top=x.a.height/2+30+"px";c.appendChild(document.createTextNode("STATS"));b.onclick=function(){b.parentNode.removeChild(b);c.parentNode.removeChild(c);A(a,a.c)};document.body.appendChild(b);
document.body.appendChild(c)}
function A(a,b){a.a=new u;a.b=new w(b);window.addEventListener("keypress",a.j);b.onmouseup=function(){if(0<a.a.b.i().y+a.a.b.h().height/2){var c=a.a;c.b.a=l.c}else c=a.a,c.b.a++;q(c.b)};a.g=setInterval(function(){var c=a.a;c.b.a++;q(c.b);for(var b=0;b<c.a.length;++b){var d=c.a[b];d.b.x-=5;d.a.x-=5}c=a.b;c.a.clearRect(0,0,c.b.width,c.b.height);var c=x.s,b=x.a,d=x.s,g=x.u;a.b.a.drawImage(a.a.f,d.x,d.y,g.width,g.height,c.x,c.y,b.width,b.height);var c=a.a.b.m(),b=a.a.b.i(),d=a.a.b.h(),g=a.a.c,p=x.v;a.b.a.drawImage(c,
g.x,g.y,p.width,p.height,b.x,b.y,d.width,d.height);for(c=0;c<a.a.a.length;++c)b=a.a.a[c].m(),d=a.a.a[c].i()[0],g=a.a.a[c].h()[0],a.b.a.drawImage(b,d.x,d.y,g.width,g.height),b=a.a.a[c].m(),d=a.a.a[c].i()[1],g=a.a.a[c].h()[1],a.b.a.drawImage(b,d.x,d.y,g.width,g.height);a.b.c.innerHTML=a.a.j;c=a.a.b.i();b=a.a.b.h();for(d=0;d<a.a.a.length;++d){var g=a.a.a[d].i()[0],p=a.a.a[d].h()[0],H=a.a.a[d].i()[1],I=a.a.a[d].h()[1];!a.a.a[d].o&&g.x+p.width<c.x&&(a.a.a[d].o=!0,a.a.j++);0>g.x+p.width&&(a.a.l(d),v(a.a));
(C(c,b,g,p)||C(c,b,H,I))&&B(a)}a.a.b.i().y+a.a.b.h().height>x.a.height&&B(a)},1E3/30);a.f=setInterval(function(){var b=a.a.c;b.x==2*x.j.x?b.x=0:b.x+=2*x.j.x;a.a.c=b},100)}y.prototype.j=function(a){console.log("key pressed: ",a.keyCode);32==a.keyCode&&(a=this.a,a.b.a=l.c,q(a.b))};
function C(a,b,c,m){a:{a=new h(a.x,a.y,b.width,b.height);var d=new h(c.x,c.y,m.width,m.height);c=Math.max(a.a,d.a);m=Math.min(a.a+a.width,d.a+d.width);if(c<=m&&(b=Math.max(a.b,d.b),d=Math.min(a.b+a.height,d.b+d.height),b<=d)){a.a=c;a.b=b;a.width=m-c;a.height=d-b;a=!0;break a}a=!1}return a};function D(){new y(document.querySelector("canvas"))}var E=["Sample","start"],F=this;E[0]in F||!F.execScript||F.execScript("var "+E[0]);for(var G;E.length&&(G=E.shift());)E.length||void 0===D?F[G]?F=F[G]:F=F[G]={}:F[G]=D;})();
